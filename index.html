<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
        <link rel="icon" href="icon/icon.png" type="image/png">
        <link rel="apple-touch-icon" href="icon/icon.png">
        <link rel="stylesheet" type="text/css" href="css/game.css">
        <title>Nowhere and Forever</title><!-- NAF_WEB_VIEWPORT_PATCH_v8 -->
<style>
  html, body {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
    background: black !important;
  }
  canvas, #gameCanvas {
    display: block !important;
    touch-action: none !important;
  }
</style>
    </head>
    <body style="background-color: black">
        <script type="text/javascript" src="js/main.js"></script>
        <script>
(function () {
  function ready() {
    const Graphics = window.Graphics;
    return !!(Graphics && Graphics._canvas && Graphics._canvas.style && typeof Graphics._onWindowResize === "function");
  }

  function apply() {
    const Graphics = window.Graphics;

    // Engine-native stretch scaling (keeps input mapping correct)
    Graphics._stretchEnabled = true;

    // Now safe because _canvas exists
    Graphics._onWindowResize();

    window.addEventListener("resize", () => Graphics._onWindowResize());
    window.addEventListener("orientationchange", () => Graphics._onWindowResize());

    // Mobile address-bar settling
    setTimeout(() => Graphics._onWindowResize(), 250);
    setTimeout(() => Graphics._onWindowResize(), 1000);
  }

  let tries = 0;
  const timer = setInterval(() => {
    tries++;
    if (ready()) {
      clearInterval(timer);
      apply();
    } else if (tries > 300) {
      clearInterval(timer);
      console.warn("NAF v8 patch: Graphics canvas not ready in time.");
    }
  }, 50);
})();
</script></body>
</html>
